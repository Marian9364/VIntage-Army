{"ast":null,"code":"var _jsxFileName = \"/Users/mariyannikolov/Documents/GitHub/Vintage-Army/src/components/item-details-page/ItemDetailsPage.js\",\n    _s = $RefreshSig$();\n\nimport styles from \"./ItemDetailsPage.module.css\";\nimport \"../../reset.css\";\nimport { useEffect } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport * as itemsService from \"../../services/itemsService\";\nimport * as commentService from \"../../services/commentService\";\nimport { useItemContext } from \"../../contexts/ItemContext\";\nimport { useAuthContext } from \"../../contexts/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ItemDetailsPage = () => {\n  _s();\n\n  var _currentItem$comments;\n\n  const {\n    itemId\n  } = useParams();\n  const {\n    user,\n    isAuthenticated\n  } = useAuthContext();\n  const navigate = useNavigate();\n  const {\n    addComment,\n    fetchItemDetails,\n    selectItem,\n    removeItem\n  } = useItemContext();\n  const currentItem = selectItem(itemId);\n  const isOwner = currentItem._ownerId === user._id;\n  useEffect(() => {\n    (async () => {\n      const itemDetails = await itemsService.getOne(itemId);\n      const itemComments = await commentService.getByItemId(itemId);\n      console.log(user._id == itemDetails._ownerId);\n      fetchItemDetails(itemId, { ...itemDetails,\n        comments: itemComments.map(x => `${x.user.email}: ${x.text}`)\n      });\n    })();\n  }, []);\n\n  const addCommentHandler = e => {\n    e.preventDefault();\n    const formData = new FormData(e.target);\n    const comment = formData.get(\"comment\");\n\n    if (comment === \"\") {\n      alert(\"Comment can not be empty!\");\n      return;\n    }\n\n    commentService.create(itemId, comment).then(result => {\n      addComment(itemId, comment);\n    });\n    e.target.reset();\n  };\n\n  const deleteItemHandler = () => {\n    const confirmation = window.confirm(\"Are you sure you want to delete the item?\");\n\n    if (confirmation) {\n      itemsService.remove(itemId).then(() => {\n        removeItem(itemId);\n        navigate(\"/items\");\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.mainWrapper,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.innerWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.heading,\n        children: \"Item Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Item Type: \", currentItem.type]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: styles.img,\n        src: currentItem.img\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Size: \", currentItem.size]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Gender: \", currentItem.gender]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Price: \", currentItem.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Created By: \", currentItem.creator]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Creator's Phone Number: \", currentItem.phone]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), isOwner && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.btns,\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `/items/${itemId}/edit`,\n          className: styles.editBtn,\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: deleteItemHandler,\n          className: styles.delBtn,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.commentsWrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.commentsText,\n          children: \"Comments:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          role: \"list\",\n          children: (_currentItem$comments = currentItem.comments) === null || _currentItem$comments === void 0 ? void 0 : _currentItem$comments.map(x => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: styles.comment,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: x\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, this)\n          }, x, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), !currentItem.comments && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No comments.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.createComment,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Comment On Other Sellers:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.commentFieldAndBtn,\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            className: styles.form,\n            onSubmit: addCommentHandler,\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"comment\",\n              placeholder: \"Comment......\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), isOwner || !isAuthenticated || !user ? /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.btnSubmitDisabled,\n              type: \"submit\",\n              disabled: true,\n              children: \" No Comment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.btnSubmit,\n              type: \"submit\",\n              children: \" Add Comment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ItemDetailsPage, \"nUmwxB0/u1qcpmGeB20EE9TB5po=\", false, function () {\n  return [useParams, useAuthContext, useNavigate, useItemContext];\n});\n\n_c = ItemDetailsPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ItemDetailsPage\");","map":{"version":3,"names":["styles","useEffect","useParams","Link","useNavigate","itemsService","commentService","useItemContext","useAuthContext","ItemDetailsPage","itemId","user","isAuthenticated","navigate","addComment","fetchItemDetails","selectItem","removeItem","currentItem","isOwner","_ownerId","_id","itemDetails","getOne","itemComments","getByItemId","console","log","comments","map","x","email","text","addCommentHandler","e","preventDefault","formData","FormData","target","comment","get","alert","create","then","result","reset","deleteItemHandler","confirmation","window","confirm","remove","mainWrapper","innerWrapper","heading","type","img","size","gender","price","creator","phone","btns","editBtn","delBtn","commentsWrapper","commentsText","createComment","commentFieldAndBtn","form","btnSubmitDisabled","btnSubmit"],"sources":["/Users/mariyannikolov/Documents/GitHub/Vintage-Army/src/components/item-details-page/ItemDetailsPage.js"],"sourcesContent":["import styles from \"./ItemDetailsPage.module.css\";\nimport \"../../reset.css\";\nimport { useEffect } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport * as itemsService from \"../../services/itemsService\";\nimport * as commentService from \"../../services/commentService\";\nimport { useItemContext } from \"../../contexts/ItemContext\";\nimport { useAuthContext } from \"../../contexts/AuthContext\";\n\nexport const ItemDetailsPage = () => {\n  const { itemId } = useParams();\n  const { user, isAuthenticated } = useAuthContext();\n  const navigate = useNavigate();\n  const { addComment, fetchItemDetails, selectItem, removeItem } =\n    useItemContext();\n  const currentItem = selectItem(itemId);\n\n  const isOwner = currentItem._ownerId === user._id\n\n  useEffect(() => {\n    (async () => {\n      const itemDetails = await itemsService.getOne(itemId);\n      const itemComments = await commentService.getByItemId(itemId);\n\n      console.log(user._id == itemDetails._ownerId);\n\n      fetchItemDetails(itemId, {\n        ...itemDetails,\n        comments: itemComments.map((x) => `${x.user.email}: ${x.text}`),\n      });\n    })();\n  }, []);\n\n  const addCommentHandler = (e) => {\n    e.preventDefault();\n    const formData = new FormData(e.target);\n\n    const comment = formData.get(\"comment\");\n    if (comment === \"\") {\n      alert(\"Comment can not be empty!\");\n      return;\n    }\n\n    commentService.create(itemId, comment).then((result) => {\n      addComment(itemId, comment);\n    });\n    e.target.reset();\n  };\n\n  const deleteItemHandler = () => {\n    const confirmation = window.confirm(\n      \"Are you sure you want to delete the item?\"\n    );\n\n    if (confirmation) {\n      itemsService.remove(itemId).then(() => {\n        removeItem(itemId);\n        navigate(\"/items\");\n      });\n    }\n  };\n\n  return (\n    <div className={styles.mainWrapper}>\n      <div className={styles.innerWrapper}>\n        <h1 className={styles.heading}>Item Details</h1>\n        <h1>Item Type: {currentItem.type}</h1>\n        <img className={styles.img} src={currentItem.img} />\n        <h4>Size: {currentItem.size}</h4>\n        <h4>Gender: {currentItem.gender}</h4>\n        <h4>Price: {currentItem.price}</h4>\n        <h2>Created By: {currentItem.creator}</h2>\n        <h2>Creator's Phone Number: {currentItem.phone}</h2>\n        {isOwner && \n          <div className={styles.btns}>\n            <Link to={`/items/${itemId}/edit`} className={styles.editBtn}>\n              Edit\n            </Link>\n            <button onClick={deleteItemHandler} className={styles.delBtn}>\n              Delete\n            </button>\n          </div>\n        }        \n        <div className={styles.commentsWrapper}>\n          <h2 className={styles.commentsText}>Comments:</h2>\n          <ul role=\"list\">\n            {currentItem.comments?.map((x) => (\n              <li key={x} className={styles.comment}>\n                <p>{x}</p>\n              </li>\n            ))}\n          </ul>\n          {!currentItem.comments && <p>No comments.</p>}\n        </div>\n        <div className={styles.createComment}>\n          <label>Comment On Other Sellers:</label>\n          <div className={styles.commentFieldAndBtn}>\n            <form className={styles.form} onSubmit={addCommentHandler}>\n              <textarea name=\"comment\" placeholder=\"Comment......\" />\n              {isOwner || !isAuthenticated || !user?\n              <button className={styles.btnSubmitDisabled} type=\"submit\" disabled> No Comment</button>\n              :\n              <button className={styles.btnSubmit} type=\"submit\"> Add Comment</button>\n              }\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}