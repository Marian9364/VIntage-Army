{"ast":null,"code":"const request = async (method, url, data) => {\n  try {\n    const user = localStorage.getItem('auth');\n    const auth = JSON.parse(user || '{}');\n    let headers = {};\n\n    if (auth.accessToken) {\n      headers['X-Authorization'] = auth.accessToken;\n    }\n\n    let buildRequest;\n\n    if (method === 'GET') {\n      buildRequest = fetch(url, {\n        headers\n      });\n    } else {\n      buildRequest = fetch(url, {\n        method,\n        headers: { ...headers,\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      });\n    }\n\n    const response = await buildRequest;\n    console.log(response);\n\n    if (response.ok) {\n      const result = await response.json();\n      return result;\n    } else {\n      throw {\n        message: 'Response is not ok from requester.js'\n      };\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const get = request.bind({}, 'GET');\nexport const post = request.bind({}, 'POST');\nexport const patch = request.bind({}, 'PATCH');\nexport const put = request.bind({}, 'PUT');\nexport const del = request.bind({}, 'DELETE');","map":{"version":3,"names":["request","method","url","data","user","localStorage","getItem","auth","JSON","parse","headers","accessToken","buildRequest","fetch","body","stringify","response","console","log","ok","result","json","message","error","get","bind","post","patch","put","del"],"sources":["/Users/mariyannikolov/Documents/GitHub/Vintage-Army/src/services/requester.js"],"sourcesContent":["\nconst request = async (method, url, data) => {\n    try {\n        const user = localStorage.getItem('auth');\n        const auth = JSON.parse(user || '{}');\n\n        let headers = {}\n\n        if (auth.accessToken) {\n            headers['X-Authorization'] = auth.accessToken;\n        }\n\n        let buildRequest;\n\n        if (method === 'GET') {\n            buildRequest = fetch(url, { headers });\n        } else {\n            buildRequest = fetch(url, {\n                method,\n                headers: {\n                    ...headers,\n                    'content-type': 'application/json'\n                },\n                body: JSON.stringify(data)\n            });\n        }\n        const response = await buildRequest;\n\n        console.log(response);\n\n        if (response.ok) {\n            const result = await response.json();\n            return result;\n\n        } else {\n            throw {message: 'Response is not ok from requester.js'}\n        }\n\n\n\n    } catch (error) {\n        console.log(error);\n    }\n};\n\nexport const get = request.bind({}, 'GET');\nexport const post = request.bind({}, 'POST');\nexport const patch = request.bind({}, 'PATCH');\nexport const put = request.bind({}, 'PUT');\nexport const del = request.bind({}, 'DELETE');"],"mappings":"AACA,MAAMA,OAAO,GAAG,OAAOC,MAAP,EAAeC,GAAf,EAAoBC,IAApB,KAA6B;EACzC,IAAI;IACA,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb;IACA,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWL,IAAI,IAAI,IAAnB,CAAb;IAEA,IAAIM,OAAO,GAAG,EAAd;;IAEA,IAAIH,IAAI,CAACI,WAAT,EAAsB;MAClBD,OAAO,CAAC,iBAAD,CAAP,GAA6BH,IAAI,CAACI,WAAlC;IACH;;IAED,IAAIC,YAAJ;;IAEA,IAAIX,MAAM,KAAK,KAAf,EAAsB;MAClBW,YAAY,GAAGC,KAAK,CAACX,GAAD,EAAM;QAAEQ;MAAF,CAAN,CAApB;IACH,CAFD,MAEO;MACHE,YAAY,GAAGC,KAAK,CAACX,GAAD,EAAM;QACtBD,MADsB;QAEtBS,OAAO,EAAE,EACL,GAAGA,OADE;UAEL,gBAAgB;QAFX,CAFa;QAMtBI,IAAI,EAAEN,IAAI,CAACO,SAAL,CAAeZ,IAAf;MANgB,CAAN,CAApB;IAQH;;IACD,MAAMa,QAAQ,GAAG,MAAMJ,YAAvB;IAEAK,OAAO,CAACC,GAAR,CAAYF,QAAZ;;IAEA,IAAIA,QAAQ,CAACG,EAAb,EAAiB;MACb,MAAMC,MAAM,GAAG,MAAMJ,QAAQ,CAACK,IAAT,EAArB;MACA,OAAOD,MAAP;IAEH,CAJD,MAIO;MACH,MAAM;QAACE,OAAO,EAAE;MAAV,CAAN;IACH;EAIJ,CAtCD,CAsCE,OAAOC,KAAP,EAAc;IACZN,OAAO,CAACC,GAAR,CAAYK,KAAZ;EACH;AACJ,CA1CD;;AA4CA,OAAO,MAAMC,GAAG,GAAGxB,OAAO,CAACyB,IAAR,CAAa,EAAb,EAAiB,KAAjB,CAAZ;AACP,OAAO,MAAMC,IAAI,GAAG1B,OAAO,CAACyB,IAAR,CAAa,EAAb,EAAiB,MAAjB,CAAb;AACP,OAAO,MAAME,KAAK,GAAG3B,OAAO,CAACyB,IAAR,CAAa,EAAb,EAAiB,OAAjB,CAAd;AACP,OAAO,MAAMG,GAAG,GAAG5B,OAAO,CAACyB,IAAR,CAAa,EAAb,EAAiB,KAAjB,CAAZ;AACP,OAAO,MAAMI,GAAG,GAAG7B,OAAO,CAACyB,IAAR,CAAa,EAAb,EAAiB,QAAjB,CAAZ"},"metadata":{},"sourceType":"module"}